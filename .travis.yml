language: python
python: '2.7'

before_install:
  - sudo apt-get update -qq

install:
  - pip install ansible

addons:
  sonarqube: true
env:
  global:
  - secure: "e/87wtPi1JhH2+Ms62qlTfOUK82NWWZyhXz299C6BFYorFEBnDUvrthJQjW34i+uuNpGwrChmYn+kWFYp3jzhkRc1pMUsPYj1dTkPO22CnprYpX5/jgflsnrfRdHom1LkB67q/x58IVg4c0M+JIrVeRm7a93ImuyWJVHxuFdsQTGHRNoje9vkow5eEPQSgor7G8vyC7G9Oakjz+OwIBI7CdYde7JeWA5vAWMxxGiZeD3GQDajJO3KzYtM16NbveLv8NGex5/Rx0ZTs0vAaF4fS+4pSIvGnTIDac+S5R59gIYijgjf8LbKXTyhWebYoSY3Tw99ONEzoJug6GIGTspMcJI5goTrUe9rmk982M52+cwkz83yzUqa0kThMAD5V5B6TJk4tjon60ZqTm+zp7J6a1KlBj8d/Hu0WdLd0o64VGT01atAe5BzOT99y75yEHr+RAGgLTAeVQS0mtnBcMyCX9PwqoQZMW2aWfMypobe3msADxx6oAbpGx7jZqzqO+mhghNbG1gRqpKQMzeT1zUO45Sd+QbRfhUN9FyxU01IcdqtQCb9rC4cuAmx1chOritGEreIyKTLJ+Ap5k6HYuzwKOzFJ1PJizYja59kFtSxTikusMLELsqlKy4tOpduPsQ7AC9WoWaFhwLfnH6XnV0oRVk9XB+jdL3dIDXFpi7xtg="

script:
  - ansible-playbook modern.yml --inventory-file=host_travis_ci.txt --syntax-check
  - ansible-playbook modern.yml --inventory-file=host_travis_ci.txt
  - bash -lec "gradle check cucumber"
  - bash -lec "gradle jacocoTestReport"
  - bash -lec "sonar-scanner -Dsonar.login=$SONAR_TOKEN"