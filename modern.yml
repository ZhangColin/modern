---
- name: Modern Server
  hosts: all
  any_errors_fatal: true
  roles:
    - jdk8
    - gradle
    - role: mysql
      mysql:
        database: moderntest
        user: colin
        password: truth
    - firefox
  environment:
    http_proxy: "http://10.0.2.2:3128"
    https_proxy: "http://10.0.2.2:3128"
    all_proxy: "http://10.0.2.2:1080"
    no_proxy: "127.0.0.1,localhost,10.0.2.2,10.0.2.15,ruby.taobao.org"

- name: Modern CI
  hosts: modern_ci_servers
  any_errors_fatal: true
  roles:
    - role: jenkins
      jenkins:
        port: 8000